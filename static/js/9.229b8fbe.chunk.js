(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[9],{320:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),i=n(11),o=n(3),c=n(86),l=n(23),u=n(0),s=n(94),m=n.n(s),b=n(93),p=n(35),d=n(15),j=n(1),y=function(e,t){switch(e.type){case"select":return Object(j.jsx)(p.a,{children:Object(j.jsxs)("select",Object(o.a)(Object(o.a)({},e),{},{children:[Object(j.jsx)("option",{}),t.map((function(e){return Object(j.jsx)("option",{value:e.type,children:e.name},e.name)})),Object(j.jsx)("option",{value:"others",children:"\u5176\u4ed6"})]}))});case"textarea":return Object(j.jsx)("textarea",Object(o.a)(Object(o.a)({},e),{},{rows:"5",cols:"30",style:{marginBottom:"5px"}}));default:return Object(j.jsx)("input",Object(o.a)(Object(o.a)({},e),{},{style:{marginBottom:"5px"}}))}},f=Object(d.b)((function(e){return{themes:e.notes.themes}}))((function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:e.label}),y(e.input,e.themes),Object(j.jsx)("div",{style:{marginBottom:"5px",color:"orangered"},children:e.meta.touched&&e.meta.error})]})})),h=[{label:"Title",name:"title",type:"text"},{label:"Description",name:"description",type:"textarea"},{label:"Markdown URL",name:"url",type:"text"},{label:"Image URL",name:"img",type:"text"},{label:"Updated Date",name:"updatedDate",type:"date"},{label:"Type",name:"type",type:"select"},{label:"New Type",name:"newType",type:"text"},{label:"New Type Name",name:"newTypeName",type:"text"}],O=n(36),v=function(e){var t={};return h.forEach((function(n){e[n.name]||(t[n.name]="You must provide ".concat(n.name))})),"others"!==e.type&&e.type&&(delete t.newTypeName,delete t.newType),delete t.img,t};t.default=Object(d.b)((function(e){return{token:e.auth.token,themes:e.notes.themes}}),{submitNote:O.e,submitEditNote:O.d})((function(e){var t=Object(u.useState)(null),n=Object(l.a)(t,2),a=n[0],s=n[1],p=Object(u.useState)(null),d=Object(l.a)(p,2),y=d[0],O=d[1];Object(u.useEffect)((function(){var t,n=new URLSearchParams(e.location.search),a={},r=Object(c.a)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;a[i[0]]=i[1]}}catch(m){r.e(m)}finally{r.f()}if(2===Object.keys(a).length){O(a);var l=e.themes.find((function(e){return e._id===a.themeId})),u=l.noteCollection.find((function(e){return e._id===a.noteId}));s(Object(o.a)(Object(o.a)({type:l.type},u),{},{updatedDate:u.updatedDate.replace("T00:00:00.000Z","")}))}}),[e.location.search,e.themes]);var x=function(e){return h.map((function(t){return"newType"!==t.name&&"newTypeName"!==t.name||"others"===e.type?Object(j.jsx)(b.a,{component:f,initialValue:y?a[t.name]:null,type:t.type,label:t.label,name:t.name},t.name):null}))},w=function(){var t=Object(i.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a={type:"others"===n.type?n.newType:n.type,typeName:"others"===n.type?n.newTypeName:null,detail:{title:n.title,description:n.description,url:n.url,updatedDate:n.updatedDate}},n.img&&(a.detail.img=n.img),e.token&&(y?e.submitEditNote(a,e.token,e.history,y):e.submitNote(a,e.token,e.history));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:[m.a.Form,"Main-Container"].join(" "),children:[Object(j.jsxs)("h1",{children:[y?"Edit":"Post"," The Note!"]}),Object(j.jsx)(b.b,{onSubmit:w,validate:v,render:function(e){var t=e.handleSubmit,n=(e.form,e.invalid),a=e.values;return Object(j.jsxs)("form",{onSubmit:t,children:[x(a),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",disabled:n,children:"Submit"})}),Object(j.jsx)("div",{className:m.a.Preview,children:Object(j.jsx)("pre",{children:JSON.stringify(a,0,1)})})]})}})]})}))},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(24);function r(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(a.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}},94:function(e,t,n){e.exports={Form:"NoteForm_Form__2NtYk",Preview:"NoteForm_Preview__1S3k-"}}}]);
//# sourceMappingURL=9.229b8fbe.chunk.js.map